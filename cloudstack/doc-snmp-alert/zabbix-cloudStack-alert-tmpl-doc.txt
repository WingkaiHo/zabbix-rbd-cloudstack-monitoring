一. 资源容量报警事件

   资源容量报警AlertManager.java模块检测和发送，检测间隔30s, 如果检测项目有报警持续发送，如果报警以后30s没有收到报警代表此状态恢复正常。

1. availableMemory
   Msg: Low Available Memory in cluster...
   Zabbix item: CloudStack avaiable memory alert [cs_cluster.available_memory_alert]
   Zabbix trigger: Cloudstack Low Percentage Available Memory

2. availableCpu
   Msg: Low Unallocated CPU in cluster	
   Zabbix item:  CloudStack avaiable CPU alert [cs_cluster.available_cpu_alert]
   Zabbix trigger: Cloudstack Low Percentage Available CPU

3. availableStorage 
   Msg: Low Available Storage in cluster
   Zabbix item: CloudStack avaiable storage alert [cs_cluster.available_storage_alert]
   Zabbix trigger: Cloudstack Low Percentage Available Storage

4. remainingStorageAllocated
   Msg: Remaining unallocated Storage is low in cluster
   Zabbix item: CloudStack remaining storage alert [cs_cluster.remaining.storage_alert] 
   Zabbix trigger: Cloudstack Low Remaining Storage 

5. unallocatedPrivateIp
   Msg: System Alert: Number of unallocated private IPs is low in pod
   Zabbix item: CloudStack private Ip alert [cs_cluster.private_ip_alert]
   Zabbix trigger: Cloudstack Low Unallocated Private IPs

6. unallocatedVirtualNetworkpublicIp
   Msg: Number of unallocated virtual network public IPs is low in availability zone
   Zabbix item: CloudStack virtual network public IP alert [cs_cluster.virtual_network_public_ip_alert]
   Zabbix trigger: Cloudstack Low Unallocated Virtual Public IPs

7. unallocatedDirectAttachedPublicIp
   Msg: Number of unallocated shared network IPs is low in availability zone
   Zabbix item: CloudStack direct attached public IP alert [cs_cluster.direct_attached_public_ip_alert]
   Zabbix trigger: Cloudstack Low Unallocated Shared Network IPs

8. unallocatedVlan
   Msg: System Alert: Number of unallocated VLANs is low in availability zone
   Zabbix item: CloudStack vlan alert [cs_cluster.vlan_alert]
   Zabbix trigger: Cloudstack Low Unallocated Vlan 

9. availableSecondaryStorage
   Msg: System Alert: Low Available Secondary Storage in availability zone
   Zabbix item: CloudStack avaiable secondary storage alert [cs_cluster.available_secondary_storage_alert]
   Zabbix trigger: Cloudstack Low Percentage Available Secondary Storage

二. 用户VM 异常关闭报警事件(userVmState) 
    用户VM 创建报警在UserVmManagerImpl.java检测，调用AlertManager发送的
    用户VM 异常关闭报警HighAvailabilityManagerImpl.java检测

1. 用户虚拟状态保存
   Zabbix item: CloudStack user VM state alert [cs_cluster.user_vm_state_alert]

2. 用户虚拟机状态触发报警触发事件

1) 创建用户VM失败 [处理函数 UserVmManagerImpl.updateVmStateForFailedVmCreation]
   Msg: Failed to deploy Vm with...
   Zabbix trigger: Cloudstack User VM Creation Fail

2) 检测Dedication事件不属于警告时间不处理 [checkHostsDedication]

3) 用户VM异常关闭 [处理函数 HighAvailabilityManagerImpl.scheduleRestart]
   Msg: ......stopped unexpectedly on host.......
   Zabbix trigger: Cloudstack User VM Stop Unexpectedly

4) 用户VM重启失败
   Msg: Unable to restart 

   原因: InsufficientCapacityException, ResourceUnavailableException, ConcurrentOperationException, OperationTimedoutException
   依赖触发器: 资源容量报警事件

三. Domain Router异常关闭事件
    Domain Router VM 异常关闭报警HighAvailabilityManagerImpl.java检测
    

1. 用户虚拟状态保存
   Zabbix item: CloudStack Domain Router VM state alert [cs_cluster.domain_router_vm_state_alert]

3) Domain Router VM异常关闭 [处理函数 HighAvailabilityManagerImpl.scheduleRestart]
   Msg: ......stopped unexpectedly on host.......
   Zabbix trigger: Cloudstack Domain Router VM Stop Unexpectedly

4) Domain Router重启失败
   Msg: Unable to restart 

   原因: InsufficientCapacityException, ResourceUnavailableException, ConcurrentOperationException, OperationTimedoutException
   依赖触发器: 资源容量报警事件
