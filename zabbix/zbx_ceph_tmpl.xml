<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>2.0</version>
    <date>2016-02-24T02:18:00Z</date>
    <groups>
        <group>
            <name>ceph</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template Ceph Cluster and Graphite monnitor</template>
            <name>Template Ceph Cluster and Graphite monnitor</name>
            <description>Get the ceph status from graphite</description>
            <groups>
                <group>
                    <name>ceph</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>ceph cluster</name>
                </application>
                <application>
                    <name>ceph cluster Health</name>
                </application>
                <application>
                    <name>LOG</name>
                </application>
                <application>
                    <name>None</name>
                </application>
                <application>
                    <name>Secure</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>ceph_cluster.err_log</name>
                    <type>7</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>log[/var/log/ceph/ceph.log,ERR]</key>
                    <delay>300</delay>
                    <history>7</history>
                    <trends>365</trends>
                    <status>0</status>
                    <value_type>2</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>ERR log of ceph.log</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                        <application>
                            <name>LOG</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.health</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-cluster.gauge-health]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>0</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster Health</name>
                        </application>
                    </applications>
                    <valuemap>
                        <name>ceph health</name>
                    </valuemap>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-cluster.total_avail_bytes</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-cluster.gauge-total_avail_bytes]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-cluster.total_used_bytes</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-cluster.gauge-total_used_bytes]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-cluster.total_used_percent</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-cluster.gauge-total_used_bytes; asPercent({metrix},collectd.ceph_cluster.summary-cluster.gauge-total_avail_bytes), ]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>0</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>Usage of ceph storage</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-pg.active</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-pg.gauge-active]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number of avtive pg in ceph. active: Ceph will process requests to the placement group.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-pg.clean</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-pg.gauge-clean]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>0</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number of clean pg. Clean:Ceph replicated all objects in the placement group the correct number of times.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-pg.creating</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-pg.gauge-creating]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number of pg creating. Creating: Ceph is still creating the placement group</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-pg.degraded</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-pg.gauge-degraded]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number of pg degraded.  Degraded:Ceph has not replicated some objects in the placement group the correct number of times yet.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-pg.down</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-pg.gauge-down]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number of pg down. Down: A replica with necessary data is down, so the placement group is offline.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-pg.incomplete</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-pg.gauge-incomplete]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number of pg incomplete. Incomplete:Ceph detects that a placement group is missing information about writes that may have occurred, or does not have any healthy copies. If you see this state, try to start any failed OSDs that may contain the needed information or temporarily adjust min_size to allow recovery.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-pg.inconsistent</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-pg.gauge-inconsistent]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number of pg inconsistencies. Ceph detects inconsistencies in the one or more replicas of an object in the placement group (e.g. objects are the wrong size, objects are missing from one replica after recovery finished, etc.).</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-pg.peered</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-pg.gauge-peered]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number of pg peered. Peered: the placement group has peered, but cannot serve client IO due to not having enough copies to reach the pool’s configured min_size parameter. Recovery may occur in this state, so the pg may heal up to min_size eventually.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-pg.recovering</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-pg.gauge-recovering]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number pg of recovering. Recovering:ceeph is migrating/synchronizing objects and their replicas.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-pg.repair</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-pg.gauge-repair]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number pg of repair. Repair: ceph is checking the placement group and repairing any inconsistencies it finds (if possible).</description>
                    <inventory_link>0</inventory_link>
                    <applications/>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-pg.replay</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-pg.gauge-replay]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number pg of replay. Replay:the placement group is waiting for clients to replay operations after an OSD crashed.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-pg.scrubbing</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-pg.gauge-scrubbing]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number pg of scrubbing. Scrubbing: ceph is checking the placement group for inconsistencies.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-pg.total</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-pg.gauge-total]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>0</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>Total number of pg in ceph cluster</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>ceph_cluster.summary-pg.undersized</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>graphite[collectd.{host}.summary-pg.gauge-undersized]</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>7</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>The number of pg undersized. Undersized:the placement group fewer copies than the configured pool replication level.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>ceph cluster</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
                <item>
                    <name>Login attempt</name>
                    <type>7</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>log[/var/log/secure,&quot;(Accepted|Failed) password&quot;,,,skip,]</key>
                    <delay>300</delay>
                    <history>7</history>
                    <trends>365</trends>
                    <status>1</status>
                    <value_type>2</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_contextname/>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authprotocol>0</snmpv3_authprotocol>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privprotocol>0</snmpv3_privprotocol>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Secure</name>
                        </application>
                    </applications>
                    <valuemap/>
                    <logtimefmt/>
                </item>
            </items>
            <discovery_rules/>
            <macros/>
            <templates/>
            <screens/>
        </template>
    </templates>
    <triggers>
        <trigger>
            <expression>{Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-pg.gauge-clean].last()}/{Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-pg.gauge-total].last()} &lt; 0.9 and {TRIGGER.VALUE}=0</expression>
            <name>Ceph cluster clean PGs less then 90%</name>
            <url/>
            <status>0</status>
            <priority>1</priority>
            <description>The ceph clean PGs less then 90%, the cluster will busy to repair pg and performance will decline</description>
            <type>0</type>
            <dependencies>
                <dependency>
                    <name>Ceph cluster has degraded PGs</name>
                    <expression>({TRIGGER.VALUE}=0 and {Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-pg.gauge-degraded].last()}&gt;0) or ({TRIGGER.VALUE}=1 and {Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-pg.gauge-degraded].change()}&gt;0)</expression>
                </dependency>
            </dependencies>
        </trigger>
        <trigger>
            <expression>({TRIGGER.VALUE}=0 and {Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-pg.gauge-degraded].last()}&gt;0) or ({TRIGGER.VALUE}=1 and {Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-pg.gauge-degraded].change()}&gt;0)</expression>
            <name>Ceph cluster has degraded PGs</name>
            <url/>
            <status>0</status>
            <priority>2</priority>
            <description>Ceph has not replicated some objects in the placement group the correct number of times yet.</description>
            <type>0</type>
            <dependencies>
                <dependency>
                    <name>Ceph cluster has down PGs</name>
                    <expression>{Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-pg.gauge-down].last()}&gt;0 and {TRIGGER.VALUE}=0</expression>
                </dependency>
            </dependencies>
        </trigger>
        <trigger>
            <expression>{Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-pg.gauge-down].last()}&gt;0 and {TRIGGER.VALUE}=0</expression>
            <name>Ceph cluster has down PGs</name>
            <url/>
            <status>0</status>
            <priority>5</priority>
            <description>A replica with necessary data is down, so the placement group is offline.&#13;
&#13;
Try to restart fail osd if osd's disk no fail.</description>
            <type>0</type>
            <dependencies/>
        </trigger>
        <trigger>
            <expression>{TRIGGER.VALUE}=0 and {Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-pg.gauge-incomplete].last()}=0</expression>
            <name>Ceph cluster has incompete PGs</name>
            <url/>
            <status>0</status>
            <priority>2</priority>
            <description>Ceph detects that a placement group is missing information about writes that may have occurred, or does not have any healthy copies. If you see this state, try to start any failed OSDs that may contain the needed information or temporarily adjust min_size to allow recovery.</description>
            <type>0</type>
            <dependencies/>
        </trigger>
        <trigger>
            <expression>{TRIGGER.VALUE}=0 and {Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-pg.gauge-inconsistent].last(,30m)}&gt;0</expression>
            <name>Ceph cluster has  inconsistent PGs</name>
            <url/>
            <status>0</status>
            <priority>2</priority>
            <description>Ceph detects inconsistencies in the one or more replicas of an object in the placement group (e.g. objects are the wrong size, objects are missing from one replica after recovery finished, etc.).&#13;
&#13;
Processing:&#13;
&#13;
1) Get the inconsitenceies pg id&#13;
#ceph health detail&#13;
&#13;
2)  start repair on &lt;pgid&gt;&#13;
#ceph pg repare &lt;pgid&gt;</description>
            <type>0</type>
            <dependencies/>
        </trigger>
        <trigger>
            <expression>{TRIGGER.VALUE}=0 and {Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-pg.gauge-peered].last()}&gt;0</expression>
            <name>Ceph cluster has peer PGs</name>
            <url/>
            <status>0</status>
            <priority>1</priority>
            <description>The placement group has peered, but cannot serve client IO due to not having enough copies to reach the pool’s configured min_size parameter. Recovery may occur in this state, so the pg may heal up to min_size eventually.&#13;
      Some read or write request in some addreee of volumes will be hung.</description>
            <type>0</type>
            <dependencies/>
        </trigger>
        <trigger>
            <expression>{Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-cluster.gauge-total_used_bytes; asPercent({metrix},collectd.ceph_cluster.summary-cluster.gauge-total_avail_bytes), ].last()}&gt;80 and {TRIGGER.VALUE}=0</expression>
            <name>Ceph cluster low space</name>
            <url/>
            <status>0</status>
            <priority>4</priority>
            <description>The usage of ceph space more than 80%</description>
            <type>0</type>
            <dependencies/>
        </trigger>
        <trigger>
            <expression>{Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-cluster.gauge-total_used_bytes; asPercent({metrix},collectd.ceph_cluster.summary-cluster.gauge-total_avail_bytes), ].last(,1h)}&gt;70 and {TRIGGER.VALUE}=0</expression>
            <name>Ceph cluster need to extend osd</name>
            <url/>
            <status>0</status>
            <priority>1</priority>
            <description>The usage of ceph space more than 70%, need to extend osd</description>
            <type>0</type>
            <dependencies>
                <dependency>
                    <name>Ceph cluster low space</name>
                    <expression>{Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-cluster.gauge-total_used_bytes; asPercent({metrix},collectd.ceph_cluster.summary-cluster.gauge-total_avail_bytes), ].last()}&gt;80 and {TRIGGER.VALUE}=0</expression>
                </dependency>
            </dependencies>
        </trigger>
        <trigger>
            <expression>{Template Ceph Cluster and Graphite monnitor:graphite[collectd.{host}.summary-cluster.gauge-health].nodata(600s)}=1 and {TRIGGER.VALUE}=0</expression>
            <name>Lost ceph monitor data</name>
            <url/>
            <status>1</status>
            <priority>1</priority>
            <description>The lost monitor data form ceph</description>
            <type>0</type>
            <dependencies>
                <dependency>
                    <name>Graphite web respond error</name>
                    <expression>{TRIGGER.VALUE}=0 and {Template Ceph Cluster and Graphite monnitor:web.test.rspcode[graphite_web,graphite_web].last()}&lt;&gt;200</expression>
                </dependency>
            </dependencies>
        </trigger>
    </triggers>
</zabbix_export>
